<div class="container py-4" *ngIf="room$ | async as room">
  <div class="card shadow">
    <div class="card-body">
      <h5 class="card-title text-warning mb-4">{{ room.name }}</h5>
      <div class="row">
        <div class="col-md-6">
          <div class="mb-3">
            <h6 class="text-secondary">Description:</h6>
            <p class="card-text">{{ room.description }}</p>
          </div>
        </div>
        <div class="col-md-6">
          <div class="mb-3">
            <h6 class="text-secondary">Details:</h6>
            <ul class="list-group">
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Capacity:</strong>
                <span>{{ room.capacity }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Office name:</strong>
                <span>{{ room.office.name }}</span>
              </li>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Location:</strong>
                <span>{{ room.office.country }}, {{ room.office.city }}, {{ room.office.address }}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="mt-4">
    <h6 class="text-secondary mb-3">Available Slots:</h6>
    <mat-form-field class="mt-4">
      <input matInput [matDatepicker]="picker" (dateChange)="handleDateSelection($event)" placeholder="Choose a date">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <ul class="list-group">
      <ng-container *ngIf="freeSlots$ | async as freeSlots">
        <li *ngFor="let slot of freeSlots; let index = index"
            class="list-group-item clickable-slot"
            [class.selected]="selectedSlot?.slot === slot?.slot"
            (click)="handleSlotClick(index, freeSlots)"
            [ngClass]="{ 'disabled': slot?.booked}">
          {{ slot.slot }}
        </li>
      </ng-container>
    </ul>

    <button type="button" class="btn btn-dark mt-4" (click)="createBookingAndRefreshSlots(slots)" [disabled]="!slots.length">Book this slot</button>
</div>
